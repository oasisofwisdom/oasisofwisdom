<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BBC Quiz | Oasis of Wisdom</title>
  <meta name="description" content="Back to the Bible Challenge - Digital Bible Quiz" />
  <meta name="keywords" content="Bible Quiz, BBC, Oasis of Wisdom, Back to the Bible, Youth, Challenge" />
  <meta name="author" content="Oasis of Wisdom Media Team" />
  <link rel="icon" href="logo.png" type="image/png">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-12R09Q1G31"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-12R09Q1G31');
  </script>

  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4fff4;
      margin: 0;
      padding: 0;
      color: #222;
    }
    header {
      background: #004225;
      color: white;
      text-align: center;
      padding: 1.2rem;
    }
    header h1 {
      margin: 0.3rem 0;
    }
    main {
      max-width: 800px;
      margin: 2rem auto;
      background: #fff;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
    }
    .hidden { display: none; }
    .question { margin: 1rem 0; }
    .question h3 { color: #004225; }
    .question label { display: block; margin: 5px 0; }
    .btn {
      background: #004225;
      color: white;
      padding: 10px 18px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin-top: 10px;
    }
    .btn:hover { background: #006400; }
    .timer { float: right; color: #b30000; font-weight: bold; }
    input[type="text"] {
      padding: 10px;
      margin-bottom: 10px;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    video {
      width: 200px;
      height: auto;
      margin: 1rem 0;
      border-radius: 6px;
      background: #eee;
    }
    .thankyou {
      text-align: center;
      font-size: 1.2rem;
    }
    .thankyou a {
      color: #004225;
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <header>
    <h1>Back to the Bible Challenge (BBC)</h1>
    <p>Online Bible Quiz for Higher Institution Students</p>
  </header>

  <main>
    <div id="startArea">
      <h3>Enter Your Details to Start</h3>
      <input type="text" id="name" placeholder="Full Name" required>
      <input type="text" id="exam" placeholder="Exam Number" required>
      <br>
      <video id="video" autoplay muted playsinline></video>
      <br>
      <button class="btn" onclick="startQuiz()">Start Test</button>
    </div>

    <form id="quizForm" class="hidden">
      <div class="timer" id="timer">Time: 00:00</div>
      <div id="questionBox" class="question"></div>
      <div id="options"></div>
      <button class="btn" id="nextBtn" type="button" onclick="nextQuestion()">Next</button>
      <button class="btn hidden" id="submitBtn" type="submit">Submit</button>
    </form>

    <div class="thankyou hidden" id="thankYou">
      <h3>üéâ Thank you for participating!</h3>
      <p>Your response has been submitted successfully.</p>
      <a href="bbc.html">‚Üê Go back to BBC Home</a>
    </div>
  </main>

  <script>
    const questions = [
      {
        q: "What is the first book of the New Testament?",
        options: ["Matthew", "Genesis", "Luke", "Acts"],
        correct: "Matthew"
      },
      {
        q: "Who built the ark?",
        options: ["Moses", "Noah", "David", "Abraham"],
        correct: "Noah"
      },
      {
        q: "Which apostle denied Jesus three times?",
        options: ["Judas", "John", "Peter", "James"],
        correct: "Peter"
      },
      {
        q: "How many days did God take to create the world?",
        options: ["6", "7", "8", "5"],
        correct: "6"
      },
      {
        q: "Where did Jesus turn water into wine?",
        options: ["Bethlehem", "Nazareth", "Cana", "Jerusalem"],
        correct: "Cana"
      },
      {
        q: "Which book has 150 chapters?",
        options: ["Psalms", "Proverbs", "Genesis", "Job"],
        correct: "Psalms"
      },
      {
        q: "Who is the 'father of faith'?",
        options: ["Abraham", "Isaac", "Jacob", "Moses"],
        correct: "Abraham"
      },
      {
        q: "Which disciple was a tax collector?",
        options: ["Peter", "James", "Matthew", "Andrew"],
        correct: "Matthew"
      },
      {
        q: "What is the shortest verse in the Bible?",
        options: ["Jesus wept.", "Pray continually.", "God is love.", "Rejoice always."],
        correct: "Jesus wept."
      },
      {
        q: "Who killed Goliath?",
        options: ["Saul", "David", "Jonathan", "Samuel"],
        correct: "David"
      }
    ];

    let current = 0;
    let userAnswers = [];
    let score = 0;
    let timer;
    let timeLeft = 0;

    const video = document.getElementById("video");
    navigator.mediaDevices.getUserMedia({ video: true, audio: true })
      .then(stream => video.srcObject = stream)
      .catch(err => console.warn("Camera error:", err));

    function startQuiz() {
      const name = document.getElementById("name").value.trim();
      const exam = document.getElementById("exam").value.trim();
      if (!name || !exam) return alert("Please enter your full name and exam number.");

      document.getElementById("startArea").classList.add("hidden");
      document.getElementById("quizForm").classList.remove("hidden");
      showQuestion();
      startTimer();
    }

    function startTimer() {
      timeLeft = 15;
      updateTimer();
      timer = setInterval(() => {
        timeLeft--;
        updateTimer();
        if (timeLeft === 0) nextQuestion();
      }, 1000);
    }

    function updateTimer() {
      document.getElementById("timer").textContent = `Time: 00:${timeLeft < 10 ? "0" + timeLeft : timeLeft}`;
    }

    function showQuestion() {
      const qBox = document.getElementById("questionBox");
      const optBox = document.getElementById("options");
      const q = questions[current];
      qBox.innerHTML = `<h3>${current + 1}. ${q.q}</h3>`;
      optBox.innerHTML = "";
      q.options.forEach(option => {
        optBox.innerHTML += `<label><input type="radio" name="q${current}" value="${option}"> ${option}</label>`;
      });

      document.getElementById("submitBtn").classList.add("hidden");
      document.getElementById("nextBtn").classList.remove("hidden");
      startTimer();
    }

    function nextQuestion() {
      clearInterval(timer);
      const selected = document.querySelector(`input[name="q${current}"]:checked`);
      const answer = selected ? selected.value : "No Answer";
      userAnswers.push({ q: questions[current].q, selected: answer, correct: questions[current].correct });
      if (answer === questions[current].correct) score++;
      current++;

      if (current < questions.length) {
        showQuestion();
      } else {
        document.getElementById("nextBtn").classList.add("hidden");
        document.getElementById("submitBtn").classList.remove("hidden");
        document.getElementById("questionBox").innerHTML = `<h3>You're done! Submit your answers below.</h3>`;
        document.getElementById("options").innerHTML = "";
      }
    }

    document.getElementById("quizForm").addEventListener("submit", async function(e) {
      e.preventDefault();
      clearInterval(timer);
      const name = document.getElementById("name").value;
      const exam = document.getElementById("exam").value;
      const formData = new FormData();
      formData.append("access_key", "99dc2fe8-9b17-47af-ab28-cf6e48489d11");
      formData.append("Name", name);
      formData.append("Exam Number", exam);
      userAnswers.forEach((ans, i) => {
        formData.append(`Q${i + 1}`, `You chose: ${ans.selected} | Correct: ${ans.correct}`);
      });
      formData.append("Total Score", `${score} / ${questions.length}`);

      await fetch("https://api.web3forms.com/submit", {
        method: "POST",
        body: formData
      });

      document.getElementById("quizForm").classList.add("hidden");
      document.getElementById("thankYou").classList.remove("hidden");
    });
  </script>
</body>
</html>
